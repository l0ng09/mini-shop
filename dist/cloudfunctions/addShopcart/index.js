const cloud=require("wx-server-sdk");cloud.init({env:cloud.DYNAMIC_CURRENT_ENV});const db=cloud.database(),_=db.command;exports.main=async(e,d)=>{let t=e.data;t.openid=e.userInfo.openId,t.type=0;let i=(await db.collection("goods").where({_id:t.commodityId}).field({title:!0,price:!0,img:!0}).get()).data;return 0!=i.length?(t.title=i[0].title,t.price=i[0].price,t.img=i[0].img,(await db.collection("order").add({data:t}))._id):null};